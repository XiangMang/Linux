# tmux 和 vim

## tmux教程

### 功能

1. 分屏
2. 允许断开 ```Terminal``` 连接后，继续运行进程

### 结构

​	一个 ```tmux``` 可以包含多个 ```session``` ，一个 ```session``` 可以包含多个 ```window``` ，一个 ```window``` 可以包含多个 ```pane``` 

​	实例：

```shell
tmux:
            session 0:
                window 0:
                    pane 0
                    pane 1
                    pane 2
                    ...
                window 1
                window 2
                ...
            session 1
            session 2
            ...
```

### 操作

1. ```tmux``` ：新建一个 ```session``` ，其中包含一个 ```window``` ，```window``` 中包含一个 ```pane``` ，```pane``` 里打开了一个 ```shell``` 
   即：对话框 ```tmux``` $\rightarrow$ ```window``` $\rightarrow$ ```pane``` $\rightarrow$ ```shell``` 

1. 按下 ```Ctrl + a``` 后手指松开，然后按 ```%``` ：将当前 ```pane``` 左右平分成两个 ```pane``` 

1. 按下 ```Ctrl + a``` 后手指松开，然后按 ```"``` （注意是双引号 ```"``` ）：将当前 ```pane``` 上下平分成两个 ```pane``` 

1. ```Ctrl + d``` ：关闭当前 ```pane``` ；如果当前 ```window``` 的所有 ```pane``` 均已关闭，则自动关闭 ```window``` ；如果当前 ```session``` 的所有 ```window``` 均已关闭，则自动关闭 ```session``` 

1. 鼠标点击可以选 ```pane``` 

1. 按下 ```ctrl + a``` 后手指松开，然后按方向键：选择相邻的 ```pane``` 

1. 鼠标拖动 ```pane``` 之间的分割线，可以调整分割线的位置

1. 按住 ```Ctrl + a``` 的同时按方向键，可以调整 ```pane``` 之间分割线的位置

1. 按下 ```Ctrl + a``` 后手指松开，然后按 ```z``` ：将当前 ```pane``` 全屏/取消全屏

1. 按下 ```Ctrl + a``` 后手指松开，然后按 ```d``` ：挂起当前 ```session``` 

1. 按下 ```Ctrl + a + d```  ：销毁当前 ```session``` 

1. ```tmux kill-server``` ：关闭所有 ```session```

1. ```tmux kill-session -t <session-name>``` ：关闭指定的 ```session```

1. ```tmux a``` ：打开之前挂起的 ```session``` 

1. 按下 ```Ctrl + a``` 后手指松开，然后按 ```s``` ：选择其它 ```session``` 

      ```up``` ：选择上一项 ```session/window/pane```

      ```down``` ：选择下一项 ```session/window/pane```

      ```left``` ：展开当前项 ```session/window```

      ```right``` ：闭合当前项 ```session/window```

1. 按下 ```Ctrl + a``` 后手指松开，然后按 ```c``` ：在当前 ```session``` 中创建一个新的 ```window``` 

1. 按下 ```Ctrl + a``` 后手指松开，然后按 ```w``` ：选择其他 ```window``` ，操作方法与12完全相同

1. 按下 ```Ctrl + a``` 后手指松开，然后按 ```PageUp``` ：翻阅当前 ```pane``` 内的内容

1. 鼠标滚轮：翻阅当前 ```pane``` 内的内容

1. 在 ```tmux``` 中选中文本时，需要按住 ```shift``` 键
     (仅支持 ```Windows``` 和 ```Linux``` ，不支持 ```Mac``` ，不过该操作并不是必须的，因此影响不大）

1. ```tmux``` 中复制/粘贴文本的通用方式：

     1. 按下 ```Ctrl + a``` 后松开手指，然后按 ```[```
     2. 用鼠标选中文本，被选中的文本会被自动复制到 ```tmux``` 的剪贴板
     3. 按下 ```Ctrl + a``` 后松开手指，然后按 ```]``` ，会将剪贴板中的内容粘贴到光标处

## vim教程

### 功能

1. 命令行模式下的文本编辑器

2. 根据文件扩展名自动判别编程语言。支持代码缩进、代码高亮等功能

3. 使用方式： ```vim filename```
   如果已有该文件，则打开它
   如果没有该文件，则打开个一个新的文件，并命名为 ```filename```

### 模式

1. 一般命令模式
   默认模式。命令输入方式：类似于打游戏放技能，按不同字符，即可进行不同操作。可以复制、粘贴、删除文本等

2. 编辑模式
   在一般命令模式里按下 ```i``` ，会进入编辑模式
   按下 ```ESC``` 会退出编辑模式，返回到一般命令模式

3. 命令行模式
   在一般命令模式里按下 ```: / ?``` 三个字母中的任意一个，会进入命令行模式。命令行在最下面
   可以查找、替换、保存、退出、配置编辑器等

### 操作

1. ```i``` ：进入编辑模式

2. ```ESC``` ：进入一般命令模式

3. ```h``` 或 ```left``` ：光标向左移动一个字符

4. ```j``` 或 ```down``` ：光标向下移动一个字符

5. ```k``` 或 ```up``` ：光标向上移动一个字符

6. ```l``` 或 ```right```：光标向右移动一个字符

7. ```n<Space>``` ：n表示数字，按下数字后再按空格，光标会向右移动这一行的 ```n``` 个字符

8. ```0``` 或 ```[Home]``` ：光标移动到本行开头

9. ```$``` 或 ```[End]``` ：光标移动到本行末尾

10. ```G``` ：光标移动到最后一行

11. ```:n``` 或 ```nG``` ：```n``` 为数字，光标移动到第 ```n``` 行

12. ```gg``` ：光标移动到第一行，相当于 ```1G```

13. ```n<Enter>``` ：```n``` 为数字，光标向下移动 ```n``` 行

14. ```/word``` ：向光标之下寻找第一个值为 ```word``` 的字符串

15. ```?word``` ：向光标之上寻找第一个值为 ```word``` 的字符串

16. ```n``` ：重复前一个查找操作

17. ```N``` ：反向重复前一个查找操作

18. ```:n1,n2s/word1/word2/g``` ：```n1``` 与 ```n2``` 为数字，在第 ```n1``` 行与 ```n2``` 行之间寻找 ```word1``` 这个字符串，并将该字符串替换为 ```word2```

19. ```:1,$s/word1/word2/g``` ：将全文的 ```word1``` 替换为 ```word2```

20. ```:1,$s/word1/word2/gc``` ：将全文的 ```word1``` 替换为 ```word2``` ，且在替换前要求用户确认

21. ```v``` ：选中文本

22. ```d``` ：删除选中的文本

23. ```dd``` : 删除当前行

24. ```y``` ：复制选中的文本

25. ```yy``` : 复制当前行

26. ```p``` : 将复制的数据在光标的下一行/下一个位置粘贴

27. ```u``` ：撤销

28. ```Ctrl + r``` ：取消撤销

29. ```>``` ：将选中的文本整体向右缩进一次

30. ```<``` ：将选中的文本整体向左缩进一次

31. ```:w``` ：保存

32. ```:w!``` ：强制保存

33. ```:q``` ：退出

34. ```:q!``` ：强制退出

35. ```:wq``` ：保存并退出

36. ```:set paste``` ：设置成粘贴模式，取消代码自动缩进

37. ```:set nopaste``` ：取消粘贴模式，开启代码自动缩进

38. ```:set nu``` ：显示行号

39. ```:set nonu``` ：隐藏行号

40. ```gg=G``` ：将全文代码格式化

41. ```:noh``` ：关闭查找关键词高亮

42. ```Ctrl + q``` ：当 ```vim``` 卡死时，可以取消当前正在执行的命令

异常处理：
每次用 ```vim``` 编辑文件时，会自动创建一个 ```.filename.swp``` 的临时文件
如果打开某个文件时，该文件的 ```swp``` 文件已存在，则会报错。此时解决办法有两种:
	(1) 找到正在打开该文件的程序，并退出
	(2) 直接删掉该 ```swp``` 文件即可

## 作业 && 答案

创建好作业后，先进入文件夹 ```/home/acs/homework/lesson_2/``` ，然后：
(0) 进入 ```homework_0``` 文件夹，创建文件 ```names.txt``` ，并顺次将下列姓名写入该文件，每个名字占一行。
     ```AcWing、yxc、Bob、张强、李明、Alice```

```shell
cd homework_0
touch names.txt
vim names.txt
i
(输入)
ESC
:wq
```



(1) 进入 ```homework_1``` 文件夹，打开 ```problem.txt``` ，并依次删除下列字符：
     [1] 最后一行第101个字符
     [2] 第3行第8个字符
     [3] 第1行第30个字符
     [4] 第16行第55个字符
     [5] 第9行第80个字符
     最后保存文件并退出。

```shell
cd homework_1
vim problem.txt

[1] 最后一行第101个字符：G 101<Space> i <Backspace> ESC
[2] 第3行第8个字符：3G 8<Space> i <Backspace> ESC
[3] 第1行第30个字符：gg 30<Space> i <Backspace> ESC
[4] 第16行第55个字符：:16<Enter> 55<Space> i <Backspace> ESC
[5] 第9行第80个字符：9G 80<Space> i <Backspace> ESC

保存：:wq<Enter>
```



(2) 进入 ```homework_2``` 文件夹，打开 ```problem.txt``` ，并依次执行如下操作：
    [1] 在第1个"two"的后面添加"abc"
    [2] 在第2个"two"的前面添加"def"
    [3] 将第3个"two"后面的连续12个字符删掉
    [4] 将第4个"two"所在的行删掉
    最后保存文件并退出。

```shell
cd homework_2
vim problem.txt
输入/two依次查找每个two
[1] 在第1个"two"的后面添加"abc"  按i进入编辑模式添加即可
[2] 在第2个"two"的前面添加"def"  按i进入编辑模式添加即可
[3] 将第3个"two"后面的连续12个字符删掉  按i进入编辑模式，然后d 12<space>
[4] 将第4个"two"所在的行删掉  输入dd即可
:wq 保存并退出
```



(3) 进入 ```homework_3``` 文件夹，打开 ```problem.txt``` ，并依次执行如下操作：
    [1] 将第5行至第15行中所有of替换成OF。
    [2] 将全文中所有的the替换成THE。
    [3] 将第偶数个is替换成IS，第奇数个is不变。下标从1开始。

```shell
cd homework_3
vim problem.txt
[1] 将第5行至第15行中所有of替换成OF。  :5,15s/of/OF/g
[2] 将全文中所有的the替换成THE。  :1,$s/the/THE/g
[3] 将第偶数个is替换成IS，第奇数个is不变。下标从1开始。  :1,$s/is/IS/gc  然后ny交替按即可
:wq 保存并退出
```



(4) 进入 ```homework_4``` 文件夹，打开 ```problem.txt``` ，并依次执行如下操作：
    [1] 删除第11行
    [2] 将所删除的行粘贴到文件最后一行的下一行
    [3] 复制第5行
    [4] 将所复制的行粘贴到文件当前最后一行的下一行

```shell
cd homework_4
vim problem.txt
[1] 删除第11行  11G dd
[2] 将所删除的行粘贴到文件最后一行的下一行  G p
[3] 复制第5行  5G yy
[4] 将所复制的行粘贴到文件当前最后一行的下行  G p
:wq  保存并退出
```



(5) 进入 ```homework_5``` 文件夹，打开 ```problem.txt``` ，并依次执行如下操作：
    [1] 删除第11行第15个字符（包含该字符）至第13行第5个字符（包含该字符）
    [2] 将所删除的内容粘贴到文件末尾（注意不要另起一行）
    [3] 复制第5行第88个字符（包含该字符）至第7行第6个字符（包含该字符）
    [4] 将所复制的内容粘贴到当前文件末尾（注意不要另起一行）

```shell
cd homework_5
vim problem.txt
[1] 删除第11行第15个字符（包含该字符）至第13行第5个字符（包含该字符）  11G 14<Space> v 13G5<Space> d
[2] 将所删除的内容粘贴到文件末尾（注意不要另起一行）  G $ p
[3] 复制第5行第88个个字符（包含该字符）至第7行第6个字符（包含该字符）  5G 87<Space >v 7G 6<Space> y
[4] 将所复制的内容粘贴到当前文件末尾（注意不要另起一行） G $ p
:wq  保存并退出
```



(6) 进入 ```homework_6``` 文件夹，并依次执行如下操作：
    [1] 清空source0.cpp
    [2] 将source1.cpp中的第1-3行和第12-24行复制到source0.cpp中

```shell
cd homework_6
vim source0.cpp
ggdG  # 删掉全文
Ctrl-a, "   在tmux中打开一个新的pane
vim source1.cpp
:set nonu  删掉行号
Shift + 选中前3行
Ctrl + insert 复制选中内容
选择source0.cpp所在的pane
:set paste 进入粘贴模式
i进入编辑模式
Shift + insert粘贴内容

同理操作source1.cpp的第12-24行
保存source0.cpp  :wq
退出source1.cpp  :q
```



(7) 进入 ```homework_7``` 文件夹，格式化 ```source.cpp```

```shell
cd homework_7
vim source.cpp
gg=G  全文格式化
:wq  保存并退出
```



(8) 进入 ```homework_8``` 文件夹，打开 ```source.cpp``` ，并依次执行如下操作：
    [1] 将第15-21行向右缩进2次。
    [2] 将第22-23行向左缩进1次。

```shell
cd homework_8
vim source.cpp
选中15-21行   15G v 21G
向右缩进一次   >
同理再缩进一次

选中22-23行   22G v 23G
向左缩进一次   <
:wq   保存并退出
```



(9) 进入 ```homework_9``` 文件夹，打开链接：https://www.acwing.com/activity/content/code/content/1694465/
    新建文件 ```source.cpp``` ，将链接中的代码抄进 ```source.cpp``` 文件中

```shell
略
```

